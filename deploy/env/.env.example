# =============================================================================
# doc-thor — Environment Configuration
# =============================================================================
# Copy this file to .env and fill in real values before running the stack.
# All variables below have defaults suitable for local development.
#
# DO NOT commit a .env file with real credentials.
# =============================================================================

# --- Exposed Ports ------------------------------------------------------------
# Nginx is the only service that exposes ports externally.
HTTP_PORT=80
HTTPS_PORT=443

# --- Base Domain --------------------------------------------------------------
# Subdomains are generated as: <project>.docs.<BASE_DOMAIN>
# For local dev, localhost works if you add entries to /etc/hosts or use a
# wildcard DNS resolver (e.g., nip.io, or local dnsmasq).
BASE_DOMAIN=localhost

# --- Storage (Garage) ---------------------------------------------------------
# Garage config lives in deploy/garage/garage.toml (single-node dev defaults).
# STORAGE_ACCESS_KEY and STORAGE_SECRET_KEY are printed once during the first
# container start — retrieve them with: docker compose logs garage
STORAGE_ACCESS_KEY=                      # Key ID from: garage key create doc-thor-key
STORAGE_SECRET_KEY=                      # Secret key from the same output
STORAGE_BUCKET=doc-thor-docs             # Single bucket for all docs

# --- Server -------------------------------------------------------------------
# SQLite path is relative to the container's /app/data volume.
# For production, switch to a PostgreSQL connection string.
DATABASE_URL=./data/db.sqlite3

# --- Builder ------------------------------------------------------------------
BUILDER_POLL_INTERVAL=5                  # Seconds between job poll cycles
BUILDER_REPLICAS=1                       # Number of concurrent builder containers
